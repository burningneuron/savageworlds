$(function(){function e(){$(".plato-mark").removeClass("focus");var t=window.location.hash.substr(1);return t&&$("."+t).addClass("focus"),e}function l(e){e.forEach(function(e){Morris.Donut(e).on("click",f)})}function c(e){$(".historical.chart").empty();var t=_.map(e,function(e){var t=new Date(e.date);return{date:t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),maintainability:parseFloat(e.maintainability).toFixed(2),sloc:e.sloc}}).slice(-20);Morris.Line({element:"chart_historical_sloc",data:t,xkey:"date",ykeys:["sloc"],labels:["Lines of Code"],parseTime:!1}),Morris.Line({element:"chart_historical_maint",data:t,xkey:"date",ykeys:["maintainability"],labels:["Maintainability"],ymax:100,parseTime:!1})}function h(e){var t={};e.jshint.messages.forEach(function(e){var n="Column: "+e.column+' "'+e.message+'"';_.isArray(e.line)?e.line.forEach(function(r){t[r]||(t[r]=""),t[r]+='<div class="plato-jshint-message text-'+e.severity+'">'+n+"</div>"}):(t[e.line]||(t[e.line]=""),t[e.line]+='<div class="plato-jshint-message text-'+e.severity+'">'+n+"</div>")});var n=document.createElement("a");n.innerHTML='<i class="plato-gutter-icon icon-eye-open"></i>',Object.keys(t).forEach(function(e){var i=document.createElement("div");i.innerHTML=t[e],r.setGutterMarker(e-1,"plato-gutter-jshint",n.cloneNode(!0)),r.addLineWidget(e-1,i)})}$("[rel=popover]").popover(),_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},window.onhashchange=e();var t=document.getElementById("file-source"),n={lineNumbers:!0,gutters:["plato-gutter-jshint","plato-gutter-complexity"],readOnly:"nocursor"},r=CodeMirror.fromTextArea(t,n),i=[],s=[],o=_.template($("#complexity-popover-template").text()),u=$('<a><i class="plato-gutter-icon icon-cog"></i></a>'),a=r.operation(function(){var e=[];return __report.complexity.functions.forEach(function(t,n){i.push({label:t.name,value:t.complexity.cyclomatic}),s.push({label:t.name,value:t.complexity.sloc.physical,formatter:function(e){return e+" lines"}});var a=t.name==="<anonymous>"?"function\\s*\\([^)]*\\)":t.name,f=t.line-1,l="plato-mark-fn-"+n,c={gutterId:"plato-gutter-complexity",el:u.clone().attr("name",l)[0]},h={type:"popover",title:t.name==="<anonymous>"?"&lt;anonymous&gt;":"function "+t.name+"",content:o(t)};e.push(r.markPopoverText({line:f,ch:0},a,l,c,h))}),e});a.forEach(function(e){e()});var f=function(e){var t=[window.pageXOffset,window.pageYOffset];window.location.hash="#plato-mark-fn-"+e,window.scrollTo(t[0],t[1]);var n=__report.complexity.functions[e].line,i=r.charCoords({line:n,ch:0});$("body,html").animate({scrollTop:i.top-50},250)};setTimeout(function(){l([{element:"fn-by-complexity",data:i},{element:"fn-by-sloc",data:s}]),c(__history)},0),r.operation(function(){h(__report)})});